# 基礎編外のコード2
## 条件付きレンダリング
用意したクイズは5問で、indexは0~4になるが、最後の問題を解いた後のページ遷移までのわずかな時間でquizIndexが5になってしまい、バグになる  
```jsx
export default function QuizPage() {
	const [quizIndex, setQuizIndex] = useState(0);
	const [answerLogs, setAnswerLogs] = useState([]);
	const navigation = useNavigate();
	const MAX_QUIZ_LEN = quizData.length;

	const handleClick = (clickedIndex) => {
		if (clickedIndex === quizData[quizIndex].answerIndex) {
			setAnswerLogs((prev) => [...prev, true])
		} else {
			setAnswerLogs((prev) => [...prev, false])
		}

		setQuizIndex((prev) => prev + 1);
	};

	useEffect(() => {
		if (answerLogs.length === MAX_QUIZ_LEN) {
			const correctNum = answerLogs.filter((answer) => {
				return answer === true
			});

			navigation(ROUTES.RESULT, {
				state: {
					maxQuizLen: MAX_QUIZ_LEN,
					correctNum: correctNum,
				}
			});
		}
	}, [answerLogs]);

	return (
		<>
			<Display>
				{`Q1. ${quizData[quizIndex].question}`}
			</Display>
			{
				quizData[quizIndex].options.map((option, index) => {
					return (
						<Button key={`option-${index}`} onClick={() => handleClick(index)}>
							{option}
						</Button>
					);
				})
			}
		</>
	)
}
```
Reactでは「&&」で条件付きレンダリングとすることができる
```diff
export default function QuizPage() {
	const [quizIndex, setQuizIndex] = useState(0);
	const [answerLogs, setAnswerLogs] = useState([]);
	const navigation = useNavigate();
	const MAX_QUIZ_LEN = quizData.length;

	const handleClick = (clickedIndex) => {
		if (clickedIndex === quizData[quizIndex].answerIndex) {
			setAnswerLogs((prev) => [...prev, true])
		} else {
			setAnswerLogs((prev) => [...prev, false])
		}

		setQuizIndex((prev) => prev + 1);
	};

	useEffect(() => {
		if (answerLogs.length === MAX_QUIZ_LEN) {
			const correctNum = answerLogs.filter((answer) => {
				return answer === true
			});

			navigation(ROUTES.RESULT, {
				state: {
					maxQuizLen: MAX_QUIZ_LEN,
					correctNum: correctNum,
				}
			});
		}
	}, [answerLogs]);

	return (
		<>
+			{quizData[quizIndex] && <Display>{`Q1. ${quizData[quizIndex].question}`}</Display>}
			{
				quizData[quizIndex].options.map((option, index) => {
					return (
						<Button key={`option-${index}`} onClick={() => handleClick(index)}>
							{option}
						</Button>
					);
				})
			}
		</>
	)
}
```
